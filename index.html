<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>JusticeFirms Journal — Practical Insights on Indian Law for Informed Clients</title>
  <meta name="description" content="Authoritative, easy-to-understand articles on bail, domestic violence, FIR quashing, Section 482 CrPC, maintenance, divorce, NDPS & more. General guidance to help you understand your rights — connect with experienced advocates at JusticeFirms." />
  <link rel="canonical" href="https://blog.justicefirms.com/" />

  <!-- Open Graph / Twitter -->
  <meta property="og:site_name" content="JusticeFirms Journal" />
  <meta property="og:title" content="JusticeFirms Journal — Practical Insights on Indian Law" />
  <meta property="og:description" content="Clear, practitioner-written articles to educate clients on key legal issues. Discover your options and connect directly with JusticeFirms for expert representation." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://blog.justicefirms.com/" />
  <meta property="og:image" content="https://images.unsplash.com/photo-1589829545856-d10d557cf95a?ixlib=rb-4.0.3&auto=format&fit=crop&w=2000&q=80" />
  <meta name="twitter:card" content="summary_large_image" />

  <!-- Icons -->
  <link rel="icon" href="/favicon.svg" type="image/svg+xml">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;600;700;900&display=swap" rel="stylesheet">

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: { 
            gold: '#D4AF37', 
            deepgold: '#B89A2E',
            charcoal: '#0B0C0E', 
            cream: '#FDFDFB', 
            muted: '#5F6368' 
          },
          fontFamily: { 
            serif: ['Playfair Display','serif'], 
            sans: ['Inter','sans-serif'] 
          },
          animation: {
            'fade-in': 'fadeIn 1s ease-out forwards',
            'slide-up': 'slideUp 0.8s ease-out forwards'
          },
          keyframes: {
            fadeIn: { '0%': { opacity: '0' }, '100%': { opacity: '1' } },
            slideUp: { '0%': { opacity: '0', transform: 'translateY(40px)' }, '100%': { opacity: '1', transform: 'translateY(0)' } }
          }
        }
      }
    }
  </script>

  <style>
    :root{--gold:#D4AF37;--charcoal:#0B0C0E;--cream:#FDFDFB;--muted:#5F6368}
    html,body{height:100%;margin:0;background:var(--cream);font-family:Inter,system-ui;color:var(--charcoal);-webkit-font-smoothing:antialiased;}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}
    .card:hover { transform: translateY(-12px); box-shadow: 0 25px 50px rgba(0,0,0,0.12); transition: all 0.4s ease; }
    .hero-gradient { background: linear-gradient(180deg, rgba(11,12,14,0.85), rgba(11,12,14,0.70)); }
  </style>

  <link rel="stylesheet" href="/styles.css?v=9">
  <script src="https://unpkg.com/lunr/lunr.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dompurify@2.4.0/dist/purify.min.js"></script>
  <script src="https://unpkg.com/lucide@latest"></script>

  <!-- JSON-LD for SEO -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"Blog",
    "name":"JusticeFirms Journal",
    "url":"https://blog.justicefirms.com",
    "description":"Educational blog on practical Indian law topics to raise awareness and guide clients toward professional legal help at JusticeFirms.",
    "publisher": {
      "@type":"LegalService",
      "name":"JusticeFirms",
      "url":"https://justicefirms.com"
    }
  }
  </script>
</head>

<body class="antialiased bg-cream text-charcoal">

  <a class="sr-only" href="#main">Skip to content</a>

  <!-- Premium Header -->
  <header class="bg-charcoal/95 backdrop-blur-lg fixed w-full z-50 border-b border-gold/10">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between h-20">
      <a href="https://justicefirms.com" class="flex items-center gap-4">
        <div class="w-14 h-14 rounded-lg bg-gold/10 flex items-center justify-center border border-gold/30">
          <span class="font-serif text-2xl text-gold">JF</span>
        </div>
        <div>
          <div class="font-serif text-2xl text-gold">JusticeFirms Journal</div>
          <div class="text-sm text-white/60">Practical Legal Awareness • Powered by JusticeFirms</div>
        </div>
      </a>

      <nav class="hidden md:flex items-center gap-10">
        <a href="#categories" class="text-white/90 hover:text-gold transition text-base">Topics</a>
        <a href="#team" class="text-white/90 hover:text-gold transition text-base">Our Experts</a>
        <a href="https://justicefirms.com/contact" class="px-6 py-3 rounded-full bg-gold text-charcoal font-semibold hover:bg-deepgold transition">Book Consultation Now</a>
      </nav>

      <button id="mobileMenuBtn" aria-expanded="false" class="md:hidden p-3 text-white">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
      </button>
    </div>

    <div id="mobileMenu" class="md:hidden hidden bg-charcoal/95 border-t border-gold/10">
      <div class="px-6 py-6 space-y-4">
        <a href="#categories" class="block text-white/90 hover:text-gold">Topics</a>
        <a href="#team" class="block text-white/90 hover:text-gold">Our Experts</a>
        <a href="https://justicefirms.com/contact" class="block px-6 py-3 rounded-full bg-gold text-charcoal font-semibold text-center">Book Consultation</a>
      </div>
    </div>
  </header>

  <!-- Hero Section -->
  <main id="main" class="pt-20">
    <section class="hero-gradient min-h-screen flex items-center bg-cover bg-center" style="background-image: url('https://images.unsplash.com/photo-1589829545856-d10d557cf95a?ixlib=rb-4.0.3&auto=format&fit=crop&w=2000&q=80');">
      <div class="max-w-7xl mx-auto px-6 lg:px-8 w-full text-center">
        <p class="text-gold uppercase tracking-widest text-sm mb-6">JUSTICEFIRMS JOURNAL</p>
        <h1 class="font-serif text-5xl md:text-7xl text-white leading-tight max-w-5xl mx-auto">
          Understand Your Rights.<br><span class="italic text-gold">Get Expert Guidance.</span>
        </h1>
        <p class="mt-10 text-xl text-white/90 max-w-3xl mx-auto">Practical, clear articles on everyday legal issues faced by Indians — written by experienced advocates to raise awareness and help you take informed steps.</p>
        <div class="mt-12 flex flex-col sm:flex-row gap-6 justify-center">
          <a href="https://justicefirms.com/contact" class="px-8 py-4 rounded-full bg-gold text-charcoal font-semibold text-lg hover:bg-deepgold transition">Book a Confidential Consultation Today</a>
          <a href="#articlesGridSection" class="px-8 py-4 rounded-full border-2 border-white/50 text-white font-semibold text-lg hover:bg-white/10 transition">Browse Articles</a>
        </div>
      </div>
    </section>

    <!-- Topic Categories -->
    <section id="categories" class="py-20 bg-cream">
      <div class="max-w-7xl mx-auto px-6 lg:px-8 text-center">
        <h2 class="font-serif text-4xl mb-12">Explore Common Legal Topics</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
          <div class="p-8 bg-white rounded-2xl shadow-lg hover:shadow-2xl transition">
            <h3 class="font-serif text-2xl mb-4">Criminal Matters</h3>
            <p class="text-muted mb-6">Bail • Anticipatory Bail • FIR Quashing • NDPS • POCSO • Cyber Crimes</p>
            <a href="https://justicefirms.com/contact" class="text-gold font-semibold">Need Help? Contact Us →</a>
          </div>
          <div class="p-8 bg-white rounded-2xl shadow-lg hover:shadow-2xl transition">
            <h3 class="font-serif text-2xl mb-4">Family Disputes</h3>
            <p class="text-muted mb-6">Domestic Violence • Maintenance • Divorce • Child Custody</p>
            <a href="https://justicefirms.com/contact" class="text-gold font-semibold">Need Help? Contact Us →</a>
          </div>
          <div class="p-8 bg-white rounded-2xl shadow-lg hover:shadow-2xl transition">
            <h3 class="font-serif text-2xl mb-4">Civil & Other</h3>
            <p class="text-muted mb-6">Property • Writs • Service Matters • Section 482 CrPC</p>
            <a href="https://justicefirms.com/contact" class="text-gold font-semibold">Need Help? Contact Us →</a>
          </div>
        </div>
      </div>
    </section>

    <!-- Search & Tags -->
    <section class="py-16 bg-cream border-t border-b border-charcoal/5">
      <div class="max-w-7xl mx-auto px-6 lg:px-8">
        <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-8">
          <div>
            <span class="text-gold uppercase tracking-widest text-sm">FIND ANSWERS FAST</span>
            <p class="mt-3 text-muted text-lg">Search articles by case, section, or issue</p>
          </div>
          <div class="flex flex-col sm:flex-row gap-4">
            <input id="searchInput" type="search" placeholder="e.g., anticipatory bail, 498A, Section 482..." class="w-full sm:w-96 border border-charcoal/10 rounded-full px-6 py-4 focus:outline-none focus:border-gold" />
            <a href="https://justicefirms.com/contact" class="px-8 py-4 rounded-full bg-charcoal text-gold font-semibold hover:bg-gold hover:text-charcoal transition">Speak to Advocate</a>
          </div>
        </div>
        <div id="tagCloud" class="mt-10 flex flex-wrap gap-4"></div>
      </div>
    </section>

    <!-- Articles Grid -->
    <section id="articlesGridSection" class="py-20 bg-cream">
      <div class="max-w-7xl mx-auto px-6 lg:px-8">
        <h2 class="font-serif text-4xl text-center mb-12">Latest Practical Articles</h2>
        <div id="articlesGrid" class="grid gap-12 grid-cols-1 md:grid-cols-2 lg:grid-cols-3"></div>

        <div class="mt-16 flex flex-col items-center gap-8">
          <div class="flex items-center gap-6">
            <button id="prevPage" class="px-6 py-3 rounded-full border border-charcoal/20 hover:border-gold transition">Previous</button>
            <button id="nextPage" class="px-6 py-3 rounded-full border border-charcoal/20 hover:border-gold transition">Next</button>
            <span id="pageInfo" class="text-muted"></span>
          </div>
          <button id="loadMoreBtn" class="px-10 py-4 rounded-full bg-gold text-charcoal font-semibold hover:bg-deepgold transition">Load More Articles</button>
        </div>
      </div>
    </section>

    <!-- Experts Section -->
    <section id="team" class="py-20 bg-charcoal text-white">
      <div class="max-w-7xl mx-auto px-6 lg:px-8 text-center">
        <h2 class="font-serif text-5xl mb-4 text-gold">Authored by Experienced Advocates at JusticeFirms</h2>
        <p class="text-white/80 max-w-3xl mx-auto mb-16">Real courtroom practitioners sharing knowledge to empower clients.</p>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-12">
          <div class="bg-white/5 rounded-2xl p-6">
            <img src="https://images.unsplash.com/photo-1556157382-97eda2d9aa5d?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Adv. Rajesh Kumar" class="w-full h-96 object-cover rounded-xl mb-6">
            <h3 class="font-serif text-2xl mb-2">Adv. Rajesh Kumar</h3>
            <p class="text-gold mb-4">Senior Advocate • Criminal Law Specialist</p>
            <p class="text-white/80">20+ years at Allahabad High Court</p>
          </div>
          <div class="bg-white/5 rounded-2xl p-6">
            <img src="https://images.unsplash.com/photo-1573496358961-3c79f6a9f1e3?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Adv. Priyanka Sharma" class="w-full h-96 object-cover rounded-xl mb-6">
            <h3 class="font-serif text-2xl mb-2">Adv. Priyanka Sharma</h3>
            <p class="text-gold mb-4">Family & Constitutional Law Expert</p>
            <p class="text-white/80">Specializing in DV, Maintenance & Divorce</p>
          </div>
          <div class="bg-white/5 rounded-2xl p-6">
            <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Adv. Vikram Singh" class="w-full h-96 object-cover rounded-xl mb-6">
            <h3 class="font-serif text-2xl mb-2">Adv. Vikram Singh</h3>
            <p class="text-gold mb-4">Civil & Cyber Law Practitioner</p>
            <p class="text-white/80">Expert in IT Act & Property Disputes</p>
          </div>
        </div>
        <div class="mt-12">
          <a href="https://justicefirms.com/contact" class="px-8 py-4 rounded-full bg-gold text-charcoal font-semibold hover:bg-deepgold transition text-lg">Consult Our Experts Today</a>
        </div>
      </div>
    </section>

    <!-- Newsletter -->
    <section class="py-20 bg-cream">
      <div class="max-w-7xl mx-auto px-6 lg:px-8">
        <div class="bg-charcoal rounded-3xl p-12 text-center text-white">
          <h3 class="font-serif text-4xl mb-6">Stay Ahead with Legal Updates</h3>
          <p class="text-white/80 text-lg max-w-2xl mx-auto mb-10">Monthly practical guides, landmark judgments, and awareness tips — directly to your inbox.</p>
          <form id="newsletterForm" class="flex flex-col sm:flex-row max-w-lg mx-auto gap-4">
            <input id="newsletterEmail" type="email" required placeholder="your@email.com" class="flex-1 px-6 py-4 rounded-full text-charcoal" />
            <button type="submit" class="px-8 py-4 rounded-full bg-gold text-charcoal font-semibold hover:bg-deepgold transition">Subscribe Now</button>
          </form>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer with Disclaimer -->
  <footer class="bg-charcoal text-white/70 py-12 border-t border-gold/10">
    <div class="max-w-7xl mx-auto px-6 lg:px-8 text-center">
      <p class="mb-6">© 2025 JusticeFirms Journal • All rights reserved</p>
      <p class="text-sm max-w-4xl mx-auto leading-relaxed">
        <strong>Legal Disclaimer:</strong> This blog provides general information only and does not constitute legal advice. Laws vary by case and jurisdiction. Always consult a qualified advocate for personalized guidance. JusticeFirms accepts no liability for actions taken based on this content.
      </p>
      <p class="mt-6">
        <a href="https://justicefirms.com" class="text-gold hover:underline mx-2">justicefirms.com</a> • 
        <a href="https://justicefirms.com/contact" class="text-gold hover:underline mx-2">Book Consultation</a>
      </p>
    </div>
  </footer>

  <!-- Reader Modal -->
  <div id="reader" class="fixed inset-0 z-50 hidden flex items-start justify-center p-4 bg-black/50 overflow-y-auto">
    <div class="w-full max-w-4xl bg-white rounded-2xl shadow-2xl my-8">
      <div class="p-6 border-b flex justify-between items-start">
        <div>
          <h2 id="readerTitle" class="font-serif text-3xl"></h2>
          <p id="readerMeta" class="text-sm text-muted mt-2"></p>
        </div>
        <button id="closeReaderBtn" class="text-2xl text-charcoal/60 hover:text-charcoal">&times;</button>
      </div>
      <div id="readerContent" class="p-8 prose max-w-none"></div>
      <div class="p-6 border-t bg-cream text-center">
        <a href="https://justicefirms.com/contact" class="px-8 py-4 rounded-full bg-gold text-charcoal font-semibold hover:bg-deepgold transition inline-block">Book Consultation for Your Case</a>
      </div>
      <div class="p-6 border-t">
        <h3 class="font-serif text-xl mb-4 text-center">Related Articles</h3>
        <div id="relatedList" class="grid gap-6 sm:grid-cols-2"></div>
      </div>
    </div>
  </div>

  <!-- Card Template -->
  <template id="cardTemplate">
    <article class="card bg-white rounded-2xl shadow-lg overflow-hidden flex flex-col">
      <div class="cover relative h-64 bg-cover bg-center" style="background-image: url('https://images.unsplash.com/photo-1507842217343-583bb7270b66?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80');">
        <div class="absolute inset-0 bg-gradient-to-t from-charcoal/70 to-transparent"></div>
      </div>
      <div class="p-6 flex flex-col flex-1">
        <div class="flex justify-between items-center mb-3">
          <span class="tag text-gold text-xs uppercase tracking-wider">LEGAL INSIGHT</span>
          <span class="text-sm text-muted date"></span>
        </div>
        <h3 class="font-serif text-xl title line-clamp-2 mt-2"></h3>
        <p class="text-sm text-muted excerpt mt-3 flex-1 line-clamp-3"></p>
        <div class="mt-6 flex justify-between items-center">
          <button class="readBtn text-gold font-semibold hover:underline">Read Article →</button>
          <span class="text-xs text-muted readtime"></span>
        </div>
      </div>
    </article>
  </template>

  <!-- Full JavaScript -->
  <script>
  lucide.createIcons();

  const KEY = 'JF_BLOG_v1';
  const PAGE_SIZE = 6;
  let currentPage = 1;
  let currentQuery = '';
  let currentTag = '';
  let lunrIndex = null;
  let lunrDocs = {};

  const uid = () => 'a' + Math.random().toString(36).slice(2,9);
  const readTime = txt => Math.max(1, Math.round((txt||'').split(/\s+/).length / 200));
  function slugify(s){ if(!s) return ''; return s.toString().toLowerCase().trim().replace(/[\u2019\u2018\u201C\u201D]/g,'').replace(/[^a-z0-9]+/g,'-').replace(/^-+|-+$/g,''); }

  function loadArticles(){ 
    try{ 
      const raw = localStorage.getItem(KEY); 
      if(!raw) return []; 
      const arr = JSON.parse(raw); 
      arr.forEach(a=>{ if(!a.slug) a.slug = slugify(a.title||a.id); }); 
      return arr; 
    } catch(e){ console.warn(e); return []; } 
  }
  function saveArticles(list){ 
    list.forEach(a=>{ if(!a.slug) a.slug = slugify(a.title||a.id); }); 
    localStorage.setItem(KEY, JSON.stringify(list)); 
  }

  (function importArticlesJson(){ 
    if(!window.fetch || localStorage.getItem(KEY)) return; 
    fetch('/articles.json',{cache:'no-store'})
      .then(r=> r.ok ? r.json() : Promise.reject())
      .then(data=>{ 
        if(Array.isArray(data) && data.length){ 
          data.forEach(a=>{ if(!a.slug) a.slug = slugify(a.title||a.id); }); 
          localStorage.setItem(KEY, JSON.stringify(data)); 
        } 
        initApp(); 
      }).catch(()=> initApp()); 
  })();

  function buildSearchIndex(docs){ 
    try{ 
      lunrIndex = lunr(function(){ 
        this.ref('id'); 
        this.field('title',{boost:10}); 
        this.field('excerpt',{boost:5}); 
        this.field('content'); 
        this.field('tags'); 
        docs.forEach(d=> this.add(d), this); 
      }); 
      lunrDocs = {}; 
      docs.forEach(d=> lunrDocs[d.id]=d); 
    } catch(e){ lunrIndex=null; console.warn('Lunr failed', e); } 
  }

  const grid = document.getElementById('articlesGrid');
  const tpl = document.getElementById('cardTemplate');

  function renderArticles(pushStateFlag = false){
    const all = loadArticles();
    let filtered = all;

    if(currentQuery && lunrIndex){
      try{
        const results = lunrIndex.search(currentQuery + '*');
        const ids = results.map(r=>r.ref);
        filtered = ids.map(id => lunrDocs[id]).filter(Boolean);
      } catch(e){
        filtered = all.filter(a => (a.title + ' ' + a.excerpt + ' ' + (a.content||'')).toLowerCase().includes(currentQuery.toLowerCase()));
      }
    } else if(currentQuery){
      filtered = all.filter(a => (a.title + ' ' + a.excerpt + ' ' + (a.content||'')).toLowerCase().includes(currentQuery.toLowerCase()));
    }

    if(currentTag){
      filtered = filtered.filter(a => (a.tags||[]).map(t=>t.toLowerCase()).includes(currentTag.toLowerCase()));
    }

    filtered.sort((a,b) => new Date(b.date) - new Date(a.date));
    const total = filtered.length;
    const totalPages = Math.max(1, Math.ceil(total / PAGE_SIZE));
    currentPage = Math.min(Math.max(currentPage, 1), totalPages);

    const start = (currentPage - 1) * PAGE_SIZE;
    const pageItems = filtered.slice(start, start + PAGE_SIZE);

    grid.innerHTML = '';
    if(pageItems.length === 0){
      grid.innerHTML = '<p class="col-span-full text-center text-muted py-12 text-lg">No articles found.</p>';
    } else {
      pageItems.forEach(a => {
        const node = tpl.content.cloneNode(true);
        const cover = node.querySelector('.cover');
        if(a.cover) cover.style.backgroundImage = `url('${a.cover}')`;
        node.querySelector('.title').textContent = a.title;
        node.querySelector('.excerpt').textContent = a.excerpt || '';
        node.querySelector('.date').textContent = a.date ? new Date(a.date).toLocaleDateString('en-IN', {day:'numeric', month:'short', year:'numeric'}) : '';
        node.querySelector('.readtime').textContent = '· ' + readTime(a.content) + ' min read';
        const readBtn = node.querySelector('.readBtn');
        readBtn.addEventListener('click', () => openArticle(a.id || a.slug));
        cover.addEventListener('click', () => openArticle(a.id || a.slug));
        grid.appendChild(node);
      });
    }

    document.getElementById('pageInfo').textContent = `Page ${currentPage} of ${totalPages} • ${total} articles`;
    document.getElementById('prevPage').disabled = currentPage <= 1;
    document.getElementById('nextPage').disabled = currentPage >= totalPages;

    if(pushStateFlag) pushListState();
  }

  function renderTagCloud(){
    const all = loadArticles();
    const map = {};
    all.forEach(a => (a.tags || []).forEach(t => {
      const k = t.trim();
      if(k) map[k] = (map[k]||0) + 1;
    }));
    const cloud = document.getElementById('tagCloud');
    cloud.innerHTML = '';
    Object.keys(map).sort((a,b) => map[b] - map[a]).forEach(k => {
      const btn = document.createElement('button');
      btn.className = 'px-4 py-2 rounded-full border border-charcoal/20 hover:border-gold hover:bg-gold/5 transition text-sm';
      btn.textContent = `\( {k} ( \){map[k]})`;
      btn.onclick = () => {
        currentTag = k;
        currentQuery = '';
        currentPage = 1;
        document.getElementById('searchInput').value = '';
        renderArticles(true);
        highlightActiveTag(k);
      };
      cloud.appendChild(btn);
    });
    if(Object.keys(map).length > 0){
      const clear = document.createElement('button');
      clear.className = 'px-4 py-2 rounded-full border border-charcoal/20 hover:border-gold transition text-sm ml-2';
      clear.textContent = 'Clear';
      clear.onclick = () => { currentTag = ''; renderArticles(true); highlightActiveTag(''); };
      cloud.appendChild(clear);
    }
  }

  function highlightActiveTag(tag){
    document.querySelectorAll('#tagCloud button').forEach(b => {
      b.classList.toggle('bg-gold/10 border-gold', b.textContent.startsWith(tag));
    });
  }

  const searchInput = document.getElementById('searchInput');
  let searchTimeout = null;
  searchInput.addEventListener('input', e => {
    clearTimeout(searchTimeout);
    searchTimeout = setTimeout(() => {
      currentQuery = e.target.value.trim();
      currentTag = '';
      currentPage = 1;
      renderArticles(true);
    }, 350);
  });

  document.getElementById('prevPage').addEventListener('click', () => {
    if(currentPage > 1){ currentPage--; renderArticles(true); window.scrollTo({top: 400, behavior: 'smooth'}); }
  });
  document.getElementById('nextPage').addEventListener('click', () => {
    if(currentPage < Math.ceil(loadArticles().length / PAGE_SIZE)){ currentPage++; renderArticles(true); window.scrollTo({top: 400, behavior: 'smooth'}); }
  });
  document.getElementById('loadMoreBtn').addEventListener('click', () => { currentPage++; renderArticles(true); });

  function pushListState(){
    const params = new URLSearchParams();
    if(currentPage > 1) params.set('page', currentPage);
    if(currentQuery) params.set('q', currentQuery);
    if(currentTag) params.set('tag', currentTag);
    const url = params.toString() ? '?' + params.toString() : location.pathname;
    history.pushState({view:'list'}, '', url);
  }

  function applyStateFromURL(){
    const sp = new URLSearchParams(location.search);
    currentPage = parseInt(sp.get('page') || '1');
    currentQuery = sp.get('q') || '';
    currentTag = sp.get('tag') || '';
    searchInput.value = currentQuery;
    renderArticles();
    renderTagCloud();
  }

  window.addEventListener('popstate', () => {
    applyStateFromURL();
    if(!location.hash.startsWith('#!')) closeReader();
  });

  const reader = document.getElementById('reader');
  const readerTitle = document.getElementById('readerTitle');
  const readerMeta = document.getElementById('readerMeta');
  const readerContent = document.getElementById('readerContent');
  const relatedList = document.getElementById('relatedList');
  const closeReaderBtn = document.getElementById('closeReaderBtn');

  function openArticle(id){
    const articles = loadArticles();
    const article = articles.find(a => a.id === id || a.slug === id);
    if(!article) return;

    history.pushState({view:'article', id}, '', '#!' + (article.slug || article.id));
    readerTitle.textContent = article.title;
    readerMeta.innerHTML = `${article.date ? new Date(article.date).toLocaleDateString('en-IN', {day:'numeric', month:'long', year:'numeric'}) : ''} • ${article.category || 'Article'} • by ${article.author || 'JusticeFirms'}`;
    readerContent.innerHTML = DOMPurify.sanitize(marked.parse(article.content || ''));
    reader.classList.remove('hidden');
    document.body.style.overflow = 'hidden';

    // Related articles
    relatedList.innerHTML = '';
    const related = articles
      .filter(a => a.id !== article.id && (a.tags || []).some(t => (article.tags || []).includes(t)))
      .slice(0, 4);
    if(related.length === 0){
      relatedList.innerHTML = '<p class="text-center text-muted col-span-2">No related articles found.</p>';
    } else {
      related.forEach(r => {
        const div = document.createElement('div');
        div.className = 'p-4 border rounded-lg hover:bg-gray-50 cursor-pointer';
        div.innerHTML = `<h4 class="font-semibold">\( {r.title}</h4><p class="text-sm text-muted mt-2"> \){r.excerpt || ''}</p>`;
        div.onclick = () => openArticle(r.id || r.slug);
        relatedList.appendChild(div);
      });
    }
  }

  function closeReader(){
    reader.classList.add('hidden');
    document.body.style.overflow = '';
    history.pushState({view:'list'}, '', location.pathname + location.search);
  }

  closeReaderBtn.addEventListener('click', closeReader);
  reader.addEventListener('click', e => { if(e.target === reader) closeReader(); });

  // Mobile menu
  document.getElementById('mobileMenuBtn').addEventListener('click', () => {
    document.getElementById('mobileMenu').classList.toggle('hidden');
    const expanded = document.getElementById('mobileMenuBtn').getAttribute('aria-expanded') === 'true';
    document.getElementById('mobileMenuBtn').setAttribute('aria-expanded', !expanded);
  });

  // Newsletter
  document.getElementById('newsletterForm').addEventListener('submit', e => {
    e.preventDefault();
    const email = document.getElementById('newsletterEmail').value.trim();
    if(!email) return;
    // Replace with your actual form endpoint
    alert('Thank you for subscribing! Check your email.');
    e.target.reset();
  });

  function initApp(){
    const list = loadArticles();
    const docs = list.map(a => ({
      id: a.id || a.slug,
      title: a.title,
      excerpt: a.excerpt || '',
      content: a.content || '',
      tags: (a.tags || []).join(' ')
    }));
    buildSearchIndex(docs);
    renderTagCloud();
    applyStateFromURL();
    if(location.hash && location.hash.startsWith('#!')){
      openArticle(location.hash.slice(2));
    }
  }

  window.addEventListener('load', () => {
    if(!localStorage.getItem(KEY)){
      localStorage.setItem(KEY, JSON.stringify([
        {
          id: "welcome-2025",
          title: "Welcome to JusticeFirms Journal",
          date: "2025-12-26",
          category: "Introduction",
          author: "JusticeFirms Team",
          tags: ["Welcome", "Legal Awareness"],
          excerpt: "Your trusted source for practical legal insights on Indian law.",
          content: "# Welcome to JusticeFirms Journal\n\nWe provide clear, actionable articles on common legal issues to help you understand your rights and options.\n\nEvery article ends with a direct path to professional help at JusticeFirms.",
          cover: "https://images.unsplash.com/photo-1450101498861-cb244d0ab672?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80"
        }
      ]));
    }
    initApp();
  });
  </script>
</body>
</html>
