<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <!-- Dynamic SEO -->
  <title id="meta-title">JusticeFirms Journal</title>
  <meta name="description" id="meta-description" content="" />
  <link rel="canonical" id="meta-canonical" href="" />

  <!-- Open Graph -->
  <meta property="og:site_name" content="JusticeFirms Journal" />
  <meta property="og:title" id="og-title" content="" />
  <meta property="og:description" id="og-description" content="" />
  <meta property="og:type" content="article" />
  <meta property="og:url" id="og-url" content="" />
  <meta property="og:image" id="og-image" content="" />

  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" id="tw-title" content="" />
  <meta name="twitter:description" id="tw-description" content="" />
  <meta name="twitter:image" id="tw-image" content="" />

  <link rel="icon" href="/favicon.svg" type="image/svg+xml">

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;600;700;900&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            gold:'#D4AF37',
            deepgold:'#B89A2E',
            charcoal:'#0B0C0E',
            cream:'#FDFDFB',
            muted:'#5F6368'
          },
          fontFamily:{
            serif:['Playfair Display','serif'],
            sans:['Inter','sans-serif']
          }
        }
      }
    }
  </script>

  <link rel="stylesheet" href="/styles.css?v=12">

  <!-- JSON-LD -->
  <script id="jsonld" type="application/ld+json"></script>
</head>

<body class="antialiased bg-cream dark:bg-charcoal text-charcoal dark:text-white transition-colors duration-300">

<header class="fixed w-full z-50 bg-charcoal/95 backdrop-blur border-b border-gold/10">
  <div class="max-w-7xl mx-auto px-6 h-20 flex items-center justify-between">
    <a href="/" class="flex items-center gap-4">
      <div class="w-12 h-12 rounded-lg bg-gold/10 flex items-center justify-center border border-gold/30">
        <span class="font-serif text-xl text-gold">JF</span>
      </div>
      <span class="font-serif text-xl text-gold">JusticeFirms Journal</span>
    </a>

    <div class="flex items-center gap-6">
      <a href="/" class="text-white/90 hover:text-gold">Home</a>
      <a href="https://justicefirms.com/contact" class="px-6 py-3 rounded-full bg-gold text-charcoal font-semibold hover:bg-deepgold transition">
        Book Consultation
      </a>
      <button id="themeToggle" class="p-3 rounded-full bg-white/10 text-white">
        üåô
      </button>
    </div>
  </div>
</header>

<main class="pt-32 pb-20 max-w-4xl mx-auto px-6">
  <article>
    <header class="mb-12">
      <h1 id="article-title" class="font-serif text-4xl md:text-5xl mb-6"></h1>
      <div class="text-muted flex flex-wrap gap-3">
        <time id="article-date"></time> ‚Ä¢
        <span id="article-category"></span> ‚Ä¢
        <span id="article-author"></span>
      </div>
    </header>

    <img id="article-cover" class="w-full max-h-96 object-cover rounded-xl mb-12" />

    <div id="article-content" class="prose prose-lg max-w-none dark:prose-invert"></div>

    <div class="mt-16 p-10 rounded-2xl border border-gold/20 text-center bg-cream dark:bg-charcoal/50">
      <h3 class="font-serif text-3xl mb-4">Need Legal Help?</h3>
      <p class="text-muted mb-8">
        This article is informational. For case-specific advice, consult an advocate.
      </p>
      <a href="https://justicefirms.com/contact" class="px-10 py-4 rounded-full bg-gold text-charcoal font-semibold text-lg hover:bg-deepgold">
        Book Confidential Consultation
      </a>
    </div>

    <div class="mt-12 text-center">
      <a href="/" class="text-gold hover:underline">‚Üê Back to Articles</a>
    </div>
  </article>
</main>

<footer class="bg-charcoal text-white/70 py-12 border-t border-gold/10 text-center">
  <p>¬© 2025 JusticeFirms Journal</p>
  <p class="text-sm max-w-3xl mx-auto mt-4">
    Legal information only. Not a substitute for professional advice.
  </p>
</footer>

<script>
async function loadArticle() {
  try {
    // 1. Get Slug from URL (Handles both 'slug' and 'slug.html')
    let path = window.location.pathname.split('/').pop();
    let slug = path.replace('.html', ''); 

    // Agar home page par galti se template khul jaye
    if (!slug || slug === 'index' || slug === 'article-template') {
       // Optional: Redirect to home or show error
       document.getElementById('article-title').innerText = 'Please select an article from the home page.';
       return;
    }

    const res = await fetch('/articles.json');
    if (!res.ok) throw new Error('JSON load nahi ho saka');
    
    const data = await res.json();
    const article = data.articles.find(a => a.slug === slug);

    if (!article) {
      document.getElementById('article-title').innerText = 'Article Not Found';
      document.getElementById('article-content').innerHTML = '<p>The requested legal guide could not be located. <a href="/" class="text-gold">Return to Journal</a></p>';
      return;
    }

    // 2. SEO & Meta Updates
    document.title = article.title + ' ‚Äî JusticeFirms Journal';
    updateMeta('meta-description', article.excerpt);
    updateMeta('meta-canonical', window.location.href);
    updateMeta('og-title', article.title);
    updateMeta('og-description', article.excerpt);
    updateMeta('og-url', window.location.href);
    updateMeta('og-image', article.cover);
    updateMeta('tw-title', article.title);
    updateMeta('tw-description', article.excerpt);
    updateMeta('tw-image', article.cover);

    // 3. UI Content Updates
    document.getElementById('article-title').innerText = article.title;
    document.getElementById('article-date').innerText = new Date(article.published_at).toLocaleDateString('en-IN', {
        year: 'numeric', month: 'long', day: 'numeric'
    });
    document.getElementById('article-category').innerText = article.category.primary;
    document.getElementById('article-author').innerText = article.author.name;
    document.getElementById('article-cover').src = article.cover;
    document.getElementById('article-content').innerHTML = article.content;

    // 4. Schema.org JSON-LD (For Google Search)
    document.getElementById('jsonld').textContent = JSON.stringify({
      "@context": "https://schema.org",
      "@type": "LegalArticle",
      "headline": article.title,
      "description": article.excerpt,
      "image": article.cover,
      "datePublished": article.published_at,
      "author": { "@type": "Person", "name": article.author.name },
      "publisher": {
        "@type": "Organization",
        "name": "JusticeFirms",
        "logo": { "@type": "ImageObject", "url": "https://justicefirms.com/logo.png" }
      }
    });

  } catch (err) {
    console.error("Article Loading Error:", err);
  }
}

// Fixed Meta helper
function updateMeta(id, val) {
  const el = document.getElementById(id);
  if (el) {
    if (el.tagName === 'LINK') {
      el.setAttribute('href', val);
    } else {
      el.setAttribute('content', val);
    }
  }
}

loadArticle();

// Dark Mode Toggle Logic
const btn = document.getElementById('themeToggle');
btn.addEventListener('click', () => {
  document.body.classList.toggle('dark');
  btn.innerText = document.body.classList.contains('dark') ? '‚òÄÔ∏è' : 'üåô';
});
</script>
</body>
</html>
